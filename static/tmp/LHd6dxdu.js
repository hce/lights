var src=new EventSource("http://lindorf.de/feed"),lblStatus=document.getElementById('lblStatus'),btnLightOff=document.getElementById('btnLightOff'),btnLightOn=document.getElementById('btnLightOn');src.onmessage=function(msg){alert(msg);switch(msg){case'portstatus':if(msg.data[0]=='1'){lblStatus.innerHTML='_{MsgLightsAreOn}'}else lblStatus.innerHTML='_{MsgLightsAreOff}'}};btnLightOn.onclick=turn(0);btnLightOff.onclick=turn(0)
function turn(onoroff){switch(onoroff){case 0:what="lightOff";break;case 1:what="lightOn";break};return function(){xrr=new XMLRPCRequest("/control","post");xrr.addParam(what+"=yes");xrr.send();alert("Oh yeah!");return false}}